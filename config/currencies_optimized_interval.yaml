# Optimized Configuration for Interval-Based Trading
# Strategy: Single position every X minutes with maximum profit focus

global:
  # Check for signals aligned with candle close
  interval_seconds: 60  # Check every minute (align with M1 close)
  
  # Conservative portfolio limits
  max_concurrent_trades: 3  # Focus on quality over quantity
  portfolio_risk_percent: 6.0  # Max 6% total portfolio risk
  
  # Session-based trading (avoid low-liquidity periods)
  enable_session_filtering: true
  
  # ML enhancement for better entry quality
  enable_ml_enhancement: true
  ml_confidence_threshold: 0.70  # Only take high-confidence trades
  
  # Intelligent position management
  enable_intelligent_position_manager: true
  
  # Emergency controls
  emergency_controls:
    daily_loss_limit_percent: 3.0  # Stop trading if -3% for the day
    max_drawdown_percent: 8.0
    enable_auto_recovery: true

# ============================================================================
# SCALPING STRATEGY (Every 15 minutes)
# ============================================================================

EURUSD_SCALP:
  enabled: true
  risk_percent: 1.0
  timeframe: "M15"
  
  # MA Strategy - Short periods for scalping
  strategy: "crossover"
  fast_period: 5
  slow_period: 15
  
  # Tight SL/TP for scalping
  sl_pips: 15
  tp_pips: 30  # 1:2 risk-reward
  
  # Trade every 15 minutes (aligned with timeframe)
  cooldown_seconds: 900  # 15 minutes
  
  # Only trade during London session (highest volatility)
  trading_hours:
    start: "08:00"  # London open
    end: "16:00"    # Before NY close
  
  # ML Enhancement
  enable_ml_enhancement: true
  ml_model_type: "ensemble"
  ml_weight: 0.6  # 60% ML, 40% technical
  
  # Position modifications for maximum profit
  modifications:
    # Move to breakeven quickly
    enable_breakeven: true
    breakeven_trigger_pips: 15  # Move SL to BE when +15 pips
    breakeven_offset_pips: 5    # Actually BE + 5 pips
    
    # Partial profit taking
    enable_partial_close: true
    partial_close_trigger_pips: 20  # Close 50% at +20 pips
    partial_close_percent: 50
    
    # Trailing stop for remaining position
    enable_trailing_stop: true
    trailing_stop_pips: 10
    trailing_activation_pips: 25
    
    # Dynamic TP extension (if strong momentum)
    enable_dynamic_tp: true
    dynamic_tp_extension_pips: 15

# ============================================================================
# DAY TRADING STRATEGY (Every 30-60 minutes)
# ============================================================================

EURUSD_DAY:
  enabled: true
  risk_percent: 1.5
  timeframe: "M30"
  
  # Position-based strategy
  strategy: "position"
  fast_period: 10
  slow_period: 20
  
  # Moderate SL/TP
  sl_pips: 25
  tp_pips: 50  # 1:2 risk-reward
  
  # Trade every 30 minutes
  cooldown_seconds: 1800  # 30 minutes
  
  # Trade during high-volume sessions
  trading_hours:
    start: "08:00"  # London open
    end: "21:00"    # NY session end
  
  # ML Enhancement with higher threshold
  enable_ml_enhancement: true
  ml_model_type: "ensemble"
  ml_confidence_threshold: 0.72
  ml_weight: 0.7
  
  # Advanced position management
  modifications:
    enable_breakeven: true
    breakeven_trigger_pips: 25
    breakeven_offset_pips: 5
    
    enable_partial_close: true
    partial_close_trigger_pips: 35
    partial_close_percent: 50
    
    enable_trailing_stop: true
    trailing_stop_pips: 15
    trailing_activation_pips: 30
    
    # Multi-stage trailing
    enable_multi_stage_trailing: true
    stage1_profit: 30
    stage1_trail: 20
    stage2_profit: 45
    stage2_trail: 15
    stage3_profit: 60
    stage3_trail: 10

USDJPY_DAY:
  enabled: true
  risk_percent: 1.5
  timeframe: "M30"
  
  strategy: "position"
  fast_period: 10
  slow_period: 20
  
  # JPY pairs typically have larger pip values
  sl_pips: 30
  tp_pips: 60
  
  cooldown_seconds: 1800  # 30 minutes
  
  # Tokyo + London sessions
  trading_hours:
    start: "00:00"  # Tokyo open
    end: "16:00"    # London close
  
  enable_ml_enhancement: true
  ml_model_type: "ensemble"
  ml_confidence_threshold: 0.70
  
  modifications:
    enable_breakeven: true
    breakeven_trigger_pips: 30
    
    enable_partial_close: true
    partial_close_trigger_pips: 40
    partial_close_percent: 50
    
    enable_trailing_stop: true
    trailing_stop_pips: 20
    trailing_activation_pips: 35

# ============================================================================
# SWING TRADING STRATEGY (Every 4 hours)
# ============================================================================

GBPUSD_SWING:
  enabled: true
  risk_percent: 2.0
  timeframe: "H4"
  
  strategy: "position"
  fast_period: 20
  slow_period: 50
  
  # Wide SL/TP for swing trading
  sl_pips: 60
  tp_pips: 180  # 1:3 risk-reward
  
  # Trade every 4 hours (H4 candle close)
  cooldown_seconds: 14400  # 4 hours
  
  # Trade throughout the day (swing positions)
  trading_hours:
    start: "00:00"
    end: "23:59"
  
  # ML with higher confidence for larger positions
  enable_ml_enhancement: true
  ml_model_type: "ensemble"
  ml_confidence_threshold: 0.75
  ml_weight: 0.8  # Rely more on ML for swing trades
  
  # Swing trade modifications
  modifications:
    enable_breakeven: true
    breakeven_trigger_pips: 70
    breakeven_offset_pips: 10
    
    enable_partial_close: true
    partial_close_trigger_pips: 120
    partial_close_percent: 50
    
    enable_trailing_stop: true
    trailing_stop_pips: 40
    trailing_activation_pips: 100
    
    # Dynamic TP for strong trends
    enable_dynamic_tp: true
    dynamic_tp_extension_pips: 60

# ============================================================================
# PORTFOLIO-LEVEL PROFIT TARGETS
# ============================================================================

portfolio_targets:
  # Close all positions when daily profit target reached
  daily_profit_target: 3.0  # 3% of account
  close_all_on_target: true
  stop_new_trades_on_target: true
  
  # Individual currency pair targets
  per_pair_daily_target: 1.5  # 1.5% per pair

# ============================================================================
# DYNAMIC POSITION SIZING (Kelly Criterion)
# ============================================================================

dynamic_sizing:
  enabled: true
  method: "kelly"  # or "fixed"
  
  # Kelly Criterion parameters (calculated from backtest)
  win_rate: 0.60
  avg_win: 40  # Average win in pips
  avg_loss: 20  # Average loss in pips
  kelly_fraction: 0.5  # Use half Kelly for safety
  
  # ML confidence multiplier
  use_confidence_multiplier: true
  confidence_ranges:
    - min: 0.80
      max: 1.00
      multiplier: 1.5  # 1.5x risk
    - min: 0.70
      max: 0.80
      multiplier: 1.2  # 1.2x risk
    - min: 0.60
      max: 0.70
      multiplier: 1.0  # Normal risk
    - min: 0.50
      max: 0.60
      multiplier: 0.7  # Reduced risk
  
  # Adaptive sizing based on recent performance
  use_adaptive_sizing: true
  lookback_trades: 10
  
  # Reduce risk after consecutive losses
  consecutive_loss_reduction:
    losses: 3
    multiplier: 0.5  # Half risk after 3 losses
  
  # Increase risk after consecutive wins
  consecutive_win_increase:
    wins: 5
    multiplier: 1.3  # 30% more risk after 5 wins
    max_risk_percent: 3.0  # Cap at 3%

# ============================================================================
# CONFLUENCE FILTERING (Multi-factor confirmation)
# ============================================================================

confluence_filter:
  enabled: true
  minimum_score: 5  # Out of 7 possible points
  
  factors:
    ml_confidence:
      enabled: true
      threshold: 0.70
      points: 2
    
    technical_alignment:
      enabled: true
      points: 2
    
    trend_alignment:
      enabled: true
      adx_threshold: 25
      points: 1
    
    volume_confirmation:
      enabled: true
      volume_ma_period: 20
      points: 1
    
    multi_timeframe:
      enabled: true
      higher_timeframe: "H1"  # For M30 strategy
      points: 1

# ============================================================================
# CORRELATION-BASED RISK MANAGEMENT
# ============================================================================

correlation_management:
  enabled: true
  
  # Highly correlated pairs
  correlations:
    - pairs: ["EURUSD", "GBPUSD"]
      correlation: 0.80
      risk_reduction: 0.5  # Reduce risk by 50% when both open
    
    - pairs: ["EURUSD", "USDCHF"]
      correlation: -0.85  # Negative correlation
      risk_reduction: 0.3
    
    - pairs: ["AUDUSD", "NZDUSD"]
      correlation: 0.90
      risk_reduction: 0.6

# ============================================================================
# TIME-BASED FILTERS
# ============================================================================

time_filters:
  # Avoid trading during low liquidity
  avoid_times:
    - start: "22:00"  # After NY close
      end: "00:00"    # Before Tokyo open
      reason: "Low liquidity"
  
  # Close positions before weekend
  friday_close:
    enabled: true
    close_time: "20:00"  # Close all by 8 PM Friday
  
  # News calendar integration
  news_filter:
    enabled: true
    close_before_high_impact: true
    close_minutes_before: 15
    avoid_new_trades_minutes: 30  # 30 min before and after

# ============================================================================
# PERFORMANCE TRACKING & ADAPTATION
# ============================================================================

performance_tracking:
  enabled: true
  
  # Track metrics by time session
  session_stats:
    enabled: true
    sessions:
      - name: "Tokyo"
        start: "00:00"
        end: "08:00"
      - name: "London"
        start: "08:00"
        end: "16:00"
      - name: "NY"
        start: "13:00"
        end: "21:00"
  
  # Disable trading during unprofitable sessions
  auto_disable_losing_sessions: true
  session_min_win_rate: 0.55  # 55% minimum
  session_min_trades: 10  # Need 10 trades to evaluate
  
  # Track by currency pair
  pair_stats:
    enabled: true
    auto_disable_losing_pairs: true
    pair_min_win_rate: 0.52
    pair_min_trades: 15

# ============================================================================
# COMPOUNDING STRATEGY
# ============================================================================

compounding:
  enabled: true
  
  # Reinvest profits automatically
  reinvest_profits: true
  
  # Increase risk as account grows
  progressive_risk:
    enabled: true
    balance_tiers:
      - balance: 0
        risk_percent: 1.0
      - balance: 15000
        risk_percent: 1.5
      - balance: 25000
        risk_percent: 2.0
      - balance: 50000
        risk_percent: 2.5  # Max 2.5%

# ============================================================================
# NOTES
# ============================================================================

# Expected Performance (based on typical results):
#
# Scalping (M15, 1% risk, 1:2 R:R, 58% win rate):
#   - Trades per day: 6-8
#   - Average profit per trade: +0.16% of account
#   - Daily profit potential: +1.0-1.3%
#   - Monthly (compounded): +30-40%
#
# Day Trading (M30, 1.5% risk, 1:2 R:R, 60% win rate):
#   - Trades per day: 4-6
#   - Average profit per trade: +0.30% of account
#   - Daily profit potential: +1.2-1.8%
#   - Monthly (compounded): +40-60%
#
# Swing Trading (H4, 2% risk, 1:3 R:R, 55% win rate):
#   - Trades per day: 1-2
#   - Average profit per trade: +0.65% of account
#   - Daily profit potential: +0.7-1.3%
#   - Monthly (compounded): +20-40%
#
# Combined Strategy (if running all three):
#   - Daily profit potential: +3-4%
#   - Monthly (compounded): +100-150%
#   - Risk: Higher complexity, requires careful monitoring
