<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reports - TradingMTQ Analytics</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/reports.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <h1>üìã Report Management</h1>
                <div class="header-controls">
                    <a href="index.html" class="btn btn-secondary">üè† Dashboard</a>
                    <a href="charts.html" class="btn btn-secondary">üìà Charts</a>
                    <a href="alerts.html" class="btn btn-secondary">üîî Alerts</a>
                    <button id="newReportBtn" class="btn btn-primary">‚ûï New Report</button>
                </div>
            </div>
        </header>

        <!-- Status Bar -->
        <div id="statusBar" class="status-bar">
            <span class="status-indicator">
                <span class="status-dot" id="statusDot"></span>
                <span id="statusText">Ready</span>
            </span>
        </div>

        <!-- Quick Actions -->
        <section class="quick-actions">
            <div class="card">
                <h3>‚ö° Quick Generate</h3>
                <form id="quickGenerateForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="quickStartDate">Start Date</label>
                            <input type="date" id="quickStartDate" required>
                        </div>
                        <div class="form-group">
                            <label for="quickEndDate">End Date</label>
                            <input type="date" id="quickEndDate" required>
                        </div>
                        <div class="form-group">
                            <label for="quickAccount">Account</label>
                            <select id="quickAccount">
                                <option value="">All Accounts</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-row">
                        <label class="checkbox-label">
                            <input type="checkbox" id="quickIncludeTrades" checked>
                            Include Trade List
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" id="quickIncludeCharts">
                            Include Charts
                        </label>
                    </div>
                    <button type="submit" class="btn btn-primary">üìÑ Generate Report Now</button>
                </form>
            </div>
        </section>

        <!-- Scheduled Reports -->
        <section class="reports-section">
            <div class="section-header">
                <h2>üìÖ Scheduled Reports</h2>
                <div class="filter-controls">
                    <label class="checkbox-label">
                        <input type="checkbox" id="showInactive">
                        Show Inactive
                    </label>
                    <button id="refreshReportsBtn" class="btn btn-secondary btn-sm">üîÑ Refresh</button>
                </div>
            </div>

            <div id="reportsContainer" class="reports-grid">
                <!-- Reports will be loaded here -->
            </div>

            <div id="emptyState" class="empty-state" style="display: none;">
                <p>üìã No scheduled reports found</p>
                <button id="createFirstReport" class="btn btn-primary">Create Your First Report</button>
            </div>
        </section>

        <!-- Report History -->
        <section class="history-section">
            <div class="section-header">
                <h2>üìä Recent Report History</h2>
                <div class="filter-controls">
                    <select id="historyFilter">
                        <option value="all">All Reports</option>
                        <option value="success">Successful Only</option>
                        <option value="failed">Failed Only</option>
                    </select>
                    <input type="number" id="historyLimit" value="20" min="5" max="100" step="5" class="input-sm" style="width: 80px;">
                </div>
            </div>

            <div class="card">
                <table id="historyTable" class="history-table">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Report</th>
                            <th>Period</th>
                            <th>Status</th>
                            <th>Email</th>
                            <th>Size</th>
                            <th>Time</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="historyTableBody">
                        <!-- History will be loaded here -->
                    </tbody>
                </table>
            </div>
        </section>
    </div>

    <!-- Modal: Create/Edit Report -->
    <div id="reportModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">Create Report Schedule</h2>
                <button class="close-btn" id="closeModal">&times;</button>
            </div>
            <form id="reportForm">
                <div class="modal-body">
                    <!-- Basic Info -->
                    <div class="form-section">
                        <h3>Basic Information</h3>
                        <div class="form-group">
                            <label for="reportName">Report Name *</label>
                            <input type="text" id="reportName" required placeholder="e.g., Daily Performance Summary">
                        </div>
                        <div class="form-group">
                            <label for="reportDescription">Description</label>
                            <textarea id="reportDescription" rows="2" placeholder="Optional description"></textarea>
                        </div>
                    </div>

                    <!-- Schedule -->
                    <div class="form-section">
                        <h3>Schedule</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="reportFrequency">Frequency *</label>
                                <select id="reportFrequency" required>
                                    <option value="daily">Daily</option>
                                    <option value="weekly">Weekly</option>
                                    <option value="monthly">Monthly</option>
                                </select>
                            </div>
                            <div class="form-group" id="dayOfWeekGroup" style="display: none;">
                                <label for="reportDayOfWeek">Day of Week</label>
                                <select id="reportDayOfWeek">
                                    <option value="0">Monday</option>
                                    <option value="1">Tuesday</option>
                                    <option value="2">Wednesday</option>
                                    <option value="3">Thursday</option>
                                    <option value="4">Friday</option>
                                    <option value="5">Saturday</option>
                                    <option value="6">Sunday</option>
                                </select>
                            </div>
                            <div class="form-group" id="dayOfMonthGroup" style="display: none;">
                                <label for="reportDayOfMonth">Day of Month</label>
                                <input type="number" id="reportDayOfMonth" min="1" max="31" value="1">
                            </div>
                            <div class="form-group">
                                <label for="reportTimeOfDay">Time of Day</label>
                                <input type="time" id="reportTimeOfDay" value="09:00">
                            </div>
                        </div>
                    </div>

                    <!-- Report Content -->
                    <div class="form-section">
                        <h3>Report Content</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="reportAccount">Trading Account</label>
                                <select id="reportAccount">
                                    <option value="">All Accounts</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="reportDaysLookback">Days to Include *</label>
                                <input type="number" id="reportDaysLookback" min="1" max="365" value="30" required>
                            </div>
                            <div class="form-group">
                                <label for="reportFormat">Format</label>
                                <select id="reportFormat">
                                    <option value="pdf">PDF</option>
                                    <option value="csv">CSV</option>
                                    <option value="excel">Excel</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-row">
                            <label class="checkbox-label">
                                <input type="checkbox" id="reportIncludeTrades" checked>
                                Include Trade List
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" id="reportIncludeCharts" checked>
                                Include Charts
                            </label>
                        </div>
                    </div>

                    <!-- Email Settings -->
                    <div class="form-section">
                        <h3>Email Delivery</h3>
                        <div class="form-group">
                            <label for="reportRecipients">Recipients (comma-separated) *</label>
                            <input type="text" id="reportRecipients" required placeholder="email1@example.com, email2@example.com">
                        </div>
                        <div class="form-group">
                            <label for="reportCcRecipients">CC Recipients (comma-separated)</label>
                            <input type="text" id="reportCcRecipients" placeholder="Optional">
                        </div>
                        <div class="form-group">
                            <label for="reportEmailSubject">Email Subject</label>
                            <input type="text" id="reportEmailSubject" placeholder="Default: Trading Performance Report - {date}">
                        </div>
                        <div class="form-group">
                            <label for="reportEmailBody">Email Body (HTML)</label>
                            <textarea id="reportEmailBody" rows="3" placeholder="Optional custom message"></textarea>
                        </div>
                    </div>

                    <!-- Status -->
                    <div class="form-section">
                        <label class="checkbox-label">
                            <input type="checkbox" id="reportIsActive" checked>
                            <strong>Active (generate automatically)</strong>
                        </label>
                    </div>
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" id="cancelModal">Cancel</button>
                    <button type="submit" class="btn btn-primary" id="saveReportBtn">Save Report</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/reports.js"></script>
</body>
</html>
